{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container mx-auto p-4">
    <h1 class="text-3xl font-bold mb-4">Chat with PDF using Gemini</h1>
    <div class="flex flex-col md:flex-row">
        <div class="w-full md:w-1/3 pr-4 mb-4 md:mb-0">
            <h2 class="text-xl font-semibold mb-2">Upload PDFs</h2>
            <form id="pdf-upload-form" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="file" name="pdf_docs" accept=".pdf" multiple class="mb-2 w-full">
                <button type="submit" class="bg-blue-500 text-white px-4 py-2 rounded w-full">Submit & Process</button>
            </form>
            <div id="upload-status" class="mt-2"></div>
        </div>
        <div class="w-full md:w-2/3">
            <h2 class="text-xl font-semibold mb-2">Chat</h2>
            <div id="chat-container" class="bg-white p-4 rounded-lg shadow-md mb-4 h-64 overflow-y-auto"></div>
            <form id="chat-form">
                {% csrf_token %}
                <input type="text" id="user-question" placeholder="Ask a question from the PDF files" class="w-full p-2 border rounded mb-2">
                <button type="submit" class="bg-green-500 text-white px-4 py-2 rounded w-full">Send</button>
            </form>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/chat.js' %}"></script>
{% endblock %}